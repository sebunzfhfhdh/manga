<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MangaWave API</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="hero-section">
        <div class="hero-content">
            <h1>Welcome to <span class="highlight">MangaWave API</span></h1>
            <p>Your gateway to a vast collection of manga data and resources!</p>
            <button class="cta-button" onclick="window.location.href = 'https://discord.gg/kyCckj7773';">Get Started</button>
        </div>
        <div class="card-container">
            <div class="card">
                <span class="icon">üìö</span>
                <h2 class="highlight">Manga Data</h2>
                <p>Retrieve manga titles, chapters, covers, and more from a collection of <span class="highlight">4,000+ manga/manhwa</span> with just a few API calls.</p>
            </div>
            <div class="card">
                <span class="icon">üîç</span>
                <h2 class="highlight">Search</h2>
                <p>Use powerful filtering options to search through our extensive database of over <span class="highlight">4,000+ manga/manhwa.</span></p>
            </div>            
            <div class="card">
                <span class="icon">‚öôÔ∏è</span>
                <h2 class="highlight">Integration</h2>
                <p>Easily integrate our API into your projects, apps, or websites to get <span class="highlight">real-time updates</span> on manga chapters and releases.</p>
            </div>
        </div>
        <h2 class="section-title">
            Explore Manga <span class="highlight">Like Never Before</span>
        </h2>
    </header>

    <section class="manga-section">        
        <div id="mangaList" class="manga-grid">
        </div>
    </section>

    <section id="mangaDetailsSection" class="manga-details hidden">
        <div id="mangaDetails" class="details-container">
        </div>
    </section>
    
    

    <footer>
        <p>&copy; 2024 MangaWave. All rights reserved. | <a href="https://discord.gg/kyCckj7773">Join our Discord</a></p>
    </footer>

    <script>
function displayMangaDetails(mangaData) {
    console.log("Displaying manga details:", mangaData);
    const mangaDetailsSection = document.getElementById('mangaDetailsSection');
    const mangaDetailsContainer = document.getElementById('mangaDetails');

    if (mangaData) {
        mangaDetailsContainer.innerHTML = `
<div class="details-container">
    <div class="image-container">
        <img src="${mangaData.poster || 'default-poster.jpg'}" alt="${mangaData.name || 'Unknown Manga'}">
        <h3>${mangaData.name || 'Unknown Manga'}</h3> 
    </div>
    <div class="text-content">
        <p class="description">${mangaData.description || 'No description available.'}</p>
        <p><strong>Genres:</strong> ${mangaData.genres ? mangaData.genres.split(',').map(genre => `<span>${genre.trim()}</span>`).join(' ') : 'N/A'}</p>
        <p><strong>Views:</strong> ${mangaData.views || 'N/A'}</p>
        <p><strong>Chapters:</strong> ${mangaData.chapters || 'N/A'}</p>
    </div>
</div>

        `;
        mangaDetailsSection.classList.remove('hidden');
    } else {
        console.error("Manga data not available.");
    }
}

async function fetchMangaDataById(mangaId) {
    try {
        const response = await fetch(`/manga?id=${mangaId}`);
        const mangaData = await response.json();

        if (mangaData) {
            const mangaListContainer = document.getElementById('mangaList');
            const mangaItem = document.createElement('div');
            mangaItem.classList.add('manga-item');
            mangaItem.innerHTML = `
                <img src="${mangaData.poster}" alt="${mangaData.name}" class="manga-cover" data-id="${mangaId}">
            `;
            mangaItem.addEventListener('click', () => displayMangaDetails(mangaData));
            mangaListContainer.appendChild(mangaItem);
        } else {
            console.error(`Manga data not found for ID: ${mangaId}`);
        }
    } catch (error) {
        console.error('Error fetching manga data:', error);
    }
}

async function displayDefaultMangaDetails(mangaId) {
    try {
        const response = await fetch(`https://manga-yyxp.onrender.com/manga?id=${mangaId}`);
        const mangaData = await response.json();
        displayMangaDetails(mangaData);
    } catch (error) {
        console.error('Error fetching default manga details:', error);
    }
}

async function fetchMultipleMangaData(mangaIds) {
    for (const id of mangaIds) {
        await fetchMangaDataById(id);
    }
    if (mangaIds.length > 0) {
        displayDefaultMangaDetails(mangaIds[0]);
    }
}

const mangaIds = ['2', '580', '4330', '3262', '12', '1828'];
fetchMultipleMangaData(mangaIds);


    </script>
</body>
</html>
